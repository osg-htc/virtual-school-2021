
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://osg-htc.org/virtual-school-2021/materials/htcondor/part2-ex2-queue-n/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.0">
    
    
      
        <title>Exercise 2.2 - OSG Virtual School 2021</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.33e2939f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../stylesheets/code-highlight.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#htc-exercise-22-use-queue-n-cluster-and-process" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OSG Virtual School 2021" class="md-header__button md-logo" aria-label="OSG Virtual School 2021" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OSG Virtual School 2021
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Exercise 2.2
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OSG Virtual School 2021" class="md-nav__button md-logo" aria-label="OSG Virtual School 2021" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    OSG Virtual School 2021
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../schedule/" class="md-nav__link">
        Schedule
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../public-lectures/" class="md-nav__link">
        Public Lectures
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        Materials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Materials" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Materials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" checked>
      
      <label class="md-nav__link" for="__nav_4_2">
        HTC Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="HTC Exercises" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          HTC Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex1-login/" class="md-nav__link">
        Exercise 1.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex2-commands/" class="md-nav__link">
        Exercise 1.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex3-jobs/" class="md-nav__link">
        Exercise 1.3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex4-logs/" class="md-nav__link">
        Exercise 1.4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex5-request/" class="md-nav__link">
        Exercise 1.5
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex6-remove/" class="md-nav__link">
        Exercise 1.6
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex7-compile/" class="md-nav__link">
        Bonus Exercise 1.7
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part2-ex1-files/" class="md-nav__link">
        Exercise 2.1
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Exercise 2.2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Exercise 2.2
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running-many-jobs-with-one-queue-statement" class="md-nav__link">
    Running Many Jobs With One queue Statement
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-queue-n-with-output" class="md-nav__link">
    Using queue N With Output
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-process-to-distinguish-jobs" class="md-nav__link">
    Using $(Process) to Distinguish Jobs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-cluster-to-separate-files-across-runs" class="md-nav__link">
    Using $(Cluster) to Separate Files Across Runs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-process-and-cluster-in-other-statements" class="md-nav__link">
    Using $(Process) and $(Cluster) in Other Statements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-defining-jobbatchname-for-tracking" class="md-nav__link">
    (Optional) Defining JobBatchName for Tracking
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part2-ex3-queue-from/" class="md-nav__link">
        Exercise 2.3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part2-ex4-queue-matching/" class="md-nav__link">
        Bonus Exercise 2.4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part3-ex1-queue/" class="md-nav__link">
        Bonus Exercise 3.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part3-ex2-status/" class="md-nav__link">
        Bonus Exercise 3.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part3-ex3-job-retry/" class="md-nav__link">
        Bonus Exercise 3.3
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" >
      
      <label class="md-nav__link" for="__nav_4_3">
        OSG Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="OSG Exercises" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          OSG Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../osg/part1-ex1-submit-refresher/" class="md-nav__link">
        Exercise 1.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../osg/part1-ex2-login-scp/" class="md-nav__link">
        Exercise 1.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../osg/part1-ex3-submit-osg/" class="md-nav__link">
        Exercise 1.3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../osg/part1-ex4-hardware-diffs/" class="md-nav__link">
        Exercise 1.4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../osg/part1-ex5-software-diffs/" class="md-nav__link">
        Exercise 1.5
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../osg/part2-ex1-troubleshooting/" class="md-nav__link">
        Exercise 2.1
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      <label class="md-nav__link" for="__nav_4_4">
        Software Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Software Exercises" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Software Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part1-ex1-download/" class="md-nav__link">
        Exercise 1.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part1-ex2-wrapper/" class="md-nav__link">
        Exercise 1.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part1-ex3-arguments/" class="md-nav__link">
        Exercise 1.3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part2-ex1-compiling/" class="md-nav__link">
        Exercise 2.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part2-ex2-prepackaged/" class="md-nav__link">
        Exercise 2.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part2-ex3-python/" class="md-nav__link">
        Exercise 2.3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part2-ex4-matlab/" class="md-nav__link">
        Exercise 2.4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part2-ex5-conda/" class="md-nav__link">
        Exercise 2.5
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part3-ex1-singularity/" class="md-nav__link">
        Exercise 3.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part4-ex1-singularity-options/" class="md-nav__link">
        Exercise 4.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part4-ex2-docker/" class="md-nav__link">
        Exercise 4.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part4-ex3-docker-build/" class="md-nav__link">
        Exercise 4.3
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      <label class="md-nav__link" for="__nav_4_5">
        Data Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data Exercises" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Data Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part1-ex1-data-needs/" class="md-nav__link">
        Exercise 1.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part1-ex2-file-transfer/" class="md-nav__link">
        Exercise 1.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part1-ex3-blast-split/" class="md-nav__link">
        Exercise 1.3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part2-ex1-blast-proxy/" class="md-nav__link">
        Exercise 2.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part2-ex2-stash-shared/" class="md-nav__link">
        Exercise 2.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part2-ex3-stash-unique/" class="md-nav__link">
        Exercise 2.3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part3-ex1-input/" class="md-nav__link">
        Bonus Exercise 3.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part3-ex2-output/" class="md-nav__link">
        Bonus Exercise 3.2
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6" type="checkbox" id="__nav_4_6" >
      
      <label class="md-nav__link" for="__nav_4_6">
        Checkpointing Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Checkpointing Exercises" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Checkpointing Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../checkpoint/part1-ex1-checkpointing/" class="md-nav__link">
        Exercise 1.1
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_7" type="checkbox" id="__nav_4_7" >
      
      <label class="md-nav__link" for="__nav_4_7">
        Workflow Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Workflow Exercises" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_7">
          <span class="md-nav__icon md-icon"></span>
          Workflow Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../workflows/part1-ex1-simple-dag/" class="md-nav__link">
        Exercise 1.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../workflows/part1-ex2-mandelbrot/" class="md-nav__link">
        Exercise 1.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../workflows/part1-ex3-complex-dag/" class="md-nav__link">
        Exercise 1.3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../workflows/part1-ex4-failed-dag/" class="md-nav__link">
        Exercise 1.4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../workflows/part1-ex5-challenges/" class="md-nav__link">
        Bonus Exercises 1.5
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_8" type="checkbox" id="__nav_4_8" >
      
      <label class="md-nav__link" for="__nav_4_8">
        Containers and GPUs
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Containers and GPUs" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_8">
          <span class="md-nav__icon md-icon"></span>
          Containers and GPUs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../gpus/part1-ex1-containers-overview/" class="md-nav__link">
        Exercise 1.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../gpus/part1-ex2-cpu-jobs/" class="md-nav__link">
        Exercise 1.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../gpus/part1-ex3-gpu-jobs/" class="md-nav__link">
        Exercise 1.3
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../participant-tips/" class="md-nav__link">
        Participant Tips
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../staff/" class="md-nav__link">
        Staff
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running-many-jobs-with-one-queue-statement" class="md-nav__link">
    Running Many Jobs With One queue Statement
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-queue-n-with-output" class="md-nav__link">
    Using queue N With Output
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-process-to-distinguish-jobs" class="md-nav__link">
    Using $(Process) to Distinguish Jobs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-cluster-to-separate-files-across-runs" class="md-nav__link">
    Using $(Cluster) to Separate Files Across Runs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-process-and-cluster-in-other-statements" class="md-nav__link">
    Using $(Process) and $(Cluster) in Other Statements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-defining-jobbatchname-for-tracking" class="md-nav__link">
    (Optional) Defining JobBatchName for Tracking
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <style type="text/css"> pre em { font-style: normal; background-color: yellow; } pre strong { font-style: normal; font-weight: bold; color: \#008; } </style>

<h1 id="htc-exercise-22-use-queue-n-cluster-and-process">HTC Exercise 2.2: Use queue <em>N</em>, $(Cluster), and $(Process)<a class="headerlink" href="#htc-exercise-22-use-queue-n-cluster-and-process" title="Permanent link">&para;</a></h1>
<p>The goal of the next several exercises is
to learn to submit many jobs from a single <code>queue</code> statement,
and to control things like filenames and arguments on a per-job basis when doing so.</p>
<p>Suppose you have a program that you want to run many times with different arguments each time. With what you know so far, you have a couple of choices:</p>
<ul>
<li>Write one submit file; submit one job, change the argument in the submit file, submit another job, change the submit file, …</li>
<li>Write many submit files that are nearly identical except for the program argument</li>
</ul>
<p>Neither of these options seems very satisfying. Fortunately, we can do better with HTCondor.</p>
<h2 id="running-many-jobs-with-one-queue-statement">Running Many Jobs With One queue Statement<a class="headerlink" href="#running-many-jobs-with-one-queue-statement" title="Permanent link">&para;</a></h2>
<p>Here is a C program that uses a stochastic (random) method to estimate the value of π — feel free to try to figure out the method from the code, but it is not critical for this exercise. The single argument to the program is the number of samples to take. More samples should result in better estimates!</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;sys/time.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
  <span class="k">struct</span> <span class="nc">timeval</span> <span class="n">my_timeval</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">iterations</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">inside_circle</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">pi_estimate</span><span class="p">;</span>

  <span class="n">gettimeofday</span><span class="p">(</span><span class="o">&amp;</span><span class="n">my_timeval</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
  <span class="n">srand48</span><span class="p">(</span><span class="n">my_timeval</span><span class="p">.</span><span class="n">tv_sec</span> <span class="o">^</span> <span class="n">my_timeval</span><span class="p">.</span><span class="n">tv_usec</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">iterations</span> <span class="o">=</span> <span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;usage: circlepi ITERATIONS</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">iterations</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">drand48</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">drand48</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(((</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">inside_circle</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">pi_estimate</span> <span class="o">=</span> <span class="mf">4.0</span> <span class="o">*</span> <span class="p">((</span><span class="kt">double</span><span class="p">)</span> <span class="n">inside_circle</span> <span class="o">/</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="n">iterations</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d iterations, %d inside; pi = %f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">iterations</span><span class="p">,</span> <span class="n">inside_circle</span><span class="p">,</span> <span class="n">pi_estimate</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<ol>
<li>In a new directory for this exercise, save the code to a file named <code>circlepi.c</code></li>
<li>
<p>Compile the code (we will cover this in more detail during the Software lecture):</p>
<div class="codehilite"><pre><span></span><code><span class="gp">username@learn $ </span>gcc -static -o circlepi circlepi.c
</code></pre></div>

</li>
<li>
<p>Test the program with just 1000 samples:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">username@learn $ </span>./circlepi <span class="m">1000</span>
</code></pre></div>

</li>
</ol>
<p>Now suppose that you want to run the program many times, to produce many estimates.
To do so, we can tell HTCondor how many jobs to "queue up" via the <code>queue</code> statement
we've been putting at the end of each of our submit files.
Let’s see how it works:</p>
<ol>
<li>Write a normal submit file for this program<ul>
<li>Pass 1 million (<code>1000000</code>) as the command line argument to <code>circlepi</code></li>
<li>Make sure to include <code>log</code>, <code>output</code>, and <code>error</code> (with filenames like <code>circlepi.log</code>), and <code>request_*</code> lines</li>
<li>At the end of the file, write <code>queue 3</code> instead of just <code>queue</code> ("queue 3 jobs" vs. "queue a job").</li>
</ul>
</li>
<li>
<p>Submit the file. Note the slightly different message from <code>condor_submit</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="go">3 job(s) submitted to cluster *NNNN*.</span>
</code></pre></div>

</li>
<li>
<p>Before the jobs execute, look at the job queue to see the multiple jobs</p>
</li>
</ol>
<p>Here is some sample <code>condor_q -nobatch</code> output:</p>
<div class="codehilite"><pre><span></span><code><span class="go"> ID       OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD</span>
<span class="go">10228.0   cat             7/25 11:57   0+00:00:00 I  0    0.7 circlepi 1000000000</span>
<span class="go">10228.1   cat             7/25 11:57   0+00:00:00 I  0    0.7 circlepi 1000000000</span>
<span class="go">10228.2   cat             7/25 11:57   0+00:00:00 I  0    0.7 circlepi 1000000000</span>
</code></pre></div>

<p>In this sample, all three jobs are part of <strong>cluster</strong> <code>10228</code>, 
but the first job was assigned <strong>process</strong> <code>0</code>, 
the second job was assigned process <code>1</code>, 
and the third one was assigned process <code>2</code>.
(Programmers like to start counting from 0.)</p>
<p>Now we can understand what the first column in the output, the <strong><em>job ID</em></strong>, represents.
It is a job’s cluster number, a dot (<code>.</code>), and the job’s process number.
So in the example above, the job ID of the second job is <code>10228.1</code>.</p>
<p><strong>Pop Quiz:</strong> Do you remember how to ask HTCondor to list all of the jobs from one cluster? How about one specific job ID?</p>
<h2 id="using-queue-n-with-output">Using queue <em>N</em> With Output<a class="headerlink" href="#using-queue-n-with-output" title="Permanent link">&para;</a></h2>
<p>When all three jobs in your single cluster are finished, examine the resulting files.</p>
<ul>
<li>What is in the output file?</li>
<li>What is in the error file (hopefully nothing)?</li>
<li>What is in the log file? Look carefully at the job IDs in each event.</li>
<li>Is this what you expected? Is it what you wanted?</li>
</ul>
<h2 id="using-process-to-distinguish-jobs">Using $(Process) to Distinguish Jobs<a class="headerlink" href="#using-process-to-distinguish-jobs" title="Permanent link">&para;</a></h2>
<p>As you saw with the experiment above, each job ended up overwriting the same output and error filenames in the submission directory.
After all, we didn't tell it to behave any differently when it ran three jobs.
We need a way to separate output (and error) files <em>per job that is queued</em>, not just for the whole cluster of jobs. Fortunately, HTCondor has a way to separate the files easily.</p>
<p>When processing a submit file, HTCondor will replace any instance of <code>$(Process)</code> with the process number of the job, for each job that is queued. 
For example, you can use the <code>$(Process)</code> variable to define a separate output file name for each job:</p>
<div class="codehilite"><pre><span></span><code>output = my-output-file-$(Process).out
queue 10
</code></pre></div>

<p>Even though the <code>output</code> filename is defined only once, HTCondor will create separate output filenames for each job:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>First job</td>
<td><code>my-output-file-0.out</code></td>
</tr>
<tr>
<td>Second job</td>
<td><code>my-output-file-1.out</code></td>
</tr>
<tr>
<td>Third job</td>
<td><code>my-output-file-2.out</code></td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>Last (tenth) job</td>
<td><code>my-output-file-9.out</code></td>
</tr>
</tbody>
</table>
<p>Let’s see how this works for our program that estimates π.</p>
<ol>
<li>In your submit file, change the definitions of <code>output</code> and <code>error</code> to use <code>$(Process)</code> in the filename, similar to the example above.</li>
<li>Delete any output, error, and log files from previous runs.</li>
<li>Submit the updated file.</li>
</ol>
<p>When all three jobs are finished, examine the resulting files again.</p>
<ul>
<li>How many files are there of each type? What are their names?</li>
<li>Is this what you expected? Is it what you wanted from the π estimation process?</li>
</ul>
<h2 id="using-cluster-to-separate-files-across-runs">Using $(Cluster) to Separate Files Across Runs<a class="headerlink" href="#using-cluster-to-separate-files-across-runs" title="Permanent link">&para;</a></h2>
<p>With <code>$(Process)</code>, you can get separate output (and error) filenames for each job within a run. However, the next time you submit the same file, all of the output and error files are overwritten by new ones created by the new jobs. Maybe this is the behavior that you want. But sometimes, you may want to separate files by run, as well.</p>
<p>In addition to <code>$(Process)</code>, there is also a <code>$(Cluster)</code> variable that you can use in your submit files. It works just like <code>$(Process)</code>, except it is replaced with the cluster number of the entire submission. Because the cluster number is the same for all jobs within a single submission, it does not separate files by job within a submission. But when used <strong>with</strong> <code>$(Process)</code>, it can be used to separate files by run. For example, consider this <code>output</code> statement:</p>
<div class="codehilite"><pre><span></span><code>output = my-output-file-$(Cluster)-$(Process).out
</code></pre></div>

<p>For one particular run, it might result in output filenames like <code>my-output-file-2444-0.out</code>, <code>myoutput-file-2444-1.out</code>, <code>myoutput-file-2444-2.out</code>, etc.</p>
<p>However, the next run would have different filenames, replacing <code>2444</code> with the new Cluster number of that run.</p>
<h2 id="using-process-and-cluster-in-other-statements">Using $(Process) and $(Cluster) in Other Statements<a class="headerlink" href="#using-process-and-cluster-in-other-statements" title="Permanent link">&para;</a></h2>
<p>The <code>$(Cluster)</code> and <code>$(Process)</code> variables can be used in any submit file statement, although they are useful in some kinds of submit file statements and not really for others. For example, consider using $(Cluster) or $(Process) in each of the below:</p>
<ul>
<li><code>log</code></li>
<li><code>transfer_input_files</code></li>
<li><code>transfer_output_files</code></li>
<li><code>arguments</code></li>
</ul>
<p>Unfortunately, HTCondor does not easily let you perform math on the <code>$(Process)</code> number when using it. So, for example, if you use <code>$(Process)</code> as a numeric argument to a command, it will always result in jobs getting the arguments 0, 1, 2, and so on. If you have control over your program and the way in which it uses command-line arguments, then you are fine. Otherwise, you might need a solution like those in the next exercises.</p>
<h2 id="optional-defining-jobbatchname-for-tracking">(Optional) Defining JobBatchName for Tracking<a class="headerlink" href="#optional-defining-jobbatchname-for-tracking" title="Permanent link">&para;</a></h2>
<p>During the lecture, it was mentioned that you can define arbitrary attributes in your submit file, and that one purpose of such attributes is to track or report on different jobs separately. In this optional exercise, you will see how this technique can be used.</p>
<p>Once again, we will use <code>sleep</code> jobs, so that your jobs remain in the queue long enough to experiment on.</p>
<ol>
<li>Create a submit file that runs <code>sleep 120</code> (or some reasonable duration).</li>
<li>
<p>Instead of a single <code>queue</code> statement, write this:</p>
<div class="codehilite"><pre><span></span><code>jobbatchname = 1
queue 5
</code></pre></div>

</li>
<li>
<p>Submit the file.</p>
</li>
<li>
<p>Now, quickly edit the submit file to instead say:</p>
<div class="codehilite"><pre><span></span><code>jobbatchname = 2
</code></pre></div>

</li>
<li>
<p>Submit the file again.</p>
</li>
</ol>
<p>Check on the submissions using a normal <code>condor_q</code> and <code>condor_q -nobatch</code>. Of course, your special attribute does not appear in the <code>condor_q -nobatch</code> output, but it is present in the <code>condor_q</code> output and in each job’s ClassAd. You can see the effect of the attribute by limiting your <code>condor_q</code> output to one type of job or another. First, run this command:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">username@learn $ </span>condor_q -constraint <span class="s1">&#39;JobBatchName == &quot;1&quot;&#39;</span>
</code></pre></div>

<p>Do you get the output that you expected? Using the example command above, how would you list your other five jobs?
(More on constraints in later exercises.)</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../part2-ex1-files/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Exercise 2.1
            </div>
          </div>
        </a>
      
      
        <a href="../part2-ex3-queue-from/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Exercise 2.3
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d892486b.min.js"></script>
      
    
  </body>
</html>